# Model specification for Krusell-Smith heterogeneous agent model
# This file demonstrates the finalized TOML structure for HANK solver

[Parameters]
"β" = {value = 0.98, description = "Household discount factor"}
"γ" = {value = 1.0, description = "Coefficient of relative risk aversion"}
"δ" = {value = 0.025, description = "Depreciation rate"}
"α" = {value = 0.11, description = "Share of capital in production"}

[ComputationalSpecs]
T = {value = 150, description = "Number of transition periods"}
"ε" = {value = 1e-6, description = "Convergence tolerance"}
dx = {value = 1e-8, description = "Step size for numerical differentiation"}

[Dimensions.wealth]
type = "endogenous"
grid_method = "DoubleExponential"
n = 200
bounds = [0.0, 200.0]
policy_var = "KD"

[Dimensions.productivity]
type = "exogenous"
discretization = "Rouwenhorst"
n = 7
process = "AR1"
"ρ" = 0.966
"σ" = 0.283

[EndogenousVariables]
Y = "Output"
KS = "Capital supply"
KD = "Capital demand (aggregated from HH)"
r = "Interest rate"
w = "Wages"

[ExogenousVariables]
Z = "Productivity"

[Equations]
equilibrium = [
    "Y = Z * KS(-1)^α",
    "r + δ = α * Z * KS(-1)^(α-1)",
    "w = (1-α) * Z * KS(-1)^α",
    "KS = KD"
]

[AggregatedVariables.KD]
BackwardFunction = "backward_capital"
SteadyStateFunction = "steadystate_capital"

[ExogenousPaths]
Z = "ar_process(0.9)"

[InitialSteadyState]
Z = 1.0

[EndingSteadyState]
Z = 1.0
